# Concurrency(ë™ì‹œì„±)

### **Grand Central Dispatch(GCD)**

### Thread

![Thread1](https://github.com/hyeji-K/Cloud_AI_MobileiOS_Course/blob/master/Daily_Study/image/Thread1.png)

- ìŠ¤ë ˆë“œëŠ” ì¼ì˜ ë‹¨ìœ„ë¼ê³  ìƒê°í•˜ë©´ ë¨

- í”„ë¡œê·¸ë¨ì´ ëŒì•„ê°€ë©´ ê¸°ë³¸ì ìœ¼ë¡œ í•˜ë‚˜ ì´ìƒì˜ ìŠ¤ë ˆë“œê°€ ëŒì•„ê°

- ìŠ¤ë ˆë“œë¥¼ ì—¬ëŸ¬ ê°œë¥¼ ë§Œë“¤ë©´ ì‹œë¶„í• í•´ì„œ ì‚¬ìš©í•¨ ? 

- ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•´ì„œ ê±”ì—ê²Œ ì‘ì—…(Task)ì„ ì¤Œ 

- ë‹¨ì¼ ìŠ¤ë ˆë“œë¡œ ì¼ì„ í•˜ë©´ 35ë¶„ì´ ê±¸ë¦¬ì§€ë§Œ, ìŠ¤ë ˆë“œë¥¼ ë‚˜ëˆ ì„œ ì¼ì„ í•˜ë©´ 15ë¶„ì´ë©´ ë¨

- ë„¤íŠ¸ì›Œí¬ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ê²ƒ, í•˜ë“œë””ìŠ¤í¬ì—ì„œ íŒŒì¼ì„ ì½ê±°ë‚˜ ì“°ëŠ” ê²ƒ â†’ ì‹œê°„ì´ ë§ì´ ê±¸ë ¤ì„œ ìŠ¤ë ˆë“œë¥¼ ë§ì´ ì‚¬ìš©í•¨

**iOSì—ì„œëŠ” ì‘ì—…(Task)ë¥¼ Queueì— ë³´ë‚´ê¸°ë§Œ í•˜ë©´ ì•Œì•„ì„œ ë¶„ë°°**

- Queueì— ì‘ì—…ì„ ë³´ë‚´ë©´ GCDê°€ ì‘ì—…ì„ ë¶„ë°°. GCDê°€ ì‚¬ìš©í•˜ëŠ” Queueì˜ ì´ë¦„ì´ Dispatch Queue

![Thread2](https://github.com/hyeji-K/Cloud_AI_MobileiOS_Course/blob/master/Daily_Study/image/Thread2.png)

```swift
// ë™ê¸°
DispatchQueue.main.sync {
	self.tableView.reloadData()
}

// ë¹„ë™ê¸°
DispatchQueue.main.async {
	self.tableView.reloadData()
}
```

- ì‘ì—…ì˜ ë°©ì‹ : ë™ê¸°(**sync**hronous), ë¹„ë™ê¸°(**Async**hronous)

- ì‘ì—…ì˜ íš¨ìœ¨ì€ ë¹„ë™ê¸°ê°€ ë†’ì§€ë§Œ, ë¹„ë™ê¸°ë¥¼ ì“°ë©´ ì•ˆë˜ëŠ” ê²½ìš°ë„ ìˆìŒ. ì•ì˜ ì‘ì—…ì˜ ê²°ê³¼ë¥¼ ë°›ì•„ì„œ ë‹¤ë¥¸ ì¼ì„ í•´ì•¼ í• ë•Œ ì“°ë©´ ì•ˆë¨, í•¸ë“¤ëŸ¬ê°€ í•„ìš”í•¨

- ë™ê¸° ë°©ì‹ì€ ì¼ì„ ëë‚œë‹¤ìŒì— ë‹¤ìŒ ì¼ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ë³´ì¥í•¨

<aside>

> ğŸ’¡ ë™ê¸° ë°©ì‹ì€ ì„¤ê³„ê°€ ê°„ë‹¨í•˜ê³  ì§ê´€ì ì´ì§€ë§Œ ê²°ê³¼ê°€ ì£¼ì–´ì§ˆ ë•Œê¹Œì§€ ì•„ë¬´ê²ƒë„ ëª»í•˜ê³  ëŒ€ê¸°í•´ì•¼ í•˜ëŠ” ë‹¨ì 
ë¹„ë™ê¸° ë°©ì‹ì€ ë™ê¸°ë³´ë‹¤ ë³µì¡í•˜ì§€ë§Œ ê²°ê³¼ê°€ ì£¼ì–´ì§€ëŠ”ë° ì‹œê°„ì´ ê±¸ë¦¬ë”ë¼ë„ ê·¸ ì‹œê°„ ë™ì•ˆ ë‹¤ë¥¸ ì‘ì—…ì„ í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìì›ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¥ì 

</aside>

### **Serial Queue, Concurrent Queue**

![Thread3](https://github.com/hyeji-K/Cloud_AI_MobileiOS_Course/blob/master/Daily_Study/image/Thread3.png)

- Serial Queue ì‘ì—…ì´ ì˜¤ë©´ ì‘ì—…ì„ ìŠ¤ë ˆë“œì— ì°¨ë¡€ë¡œ ë°°ì¹˜í•¨

- ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ì´ ë¨

- Concurrent Queue ì‘ì—…ì´ ì˜¤ë©´ ìŠ¤ë ˆë“œì— ì‘ì—…ì„ ë°°ì¹˜í•¨

### **DispatchQueueì˜ ì¢…ë¥˜**

- MainQueue
    - ìœ ì¼í•¨
    - Main Thread ì—ì„œ ì²˜ë¦¬í•¨
    - Serial Queue
    - UI ê´€ë ¨ëœ ê²ƒì€ ë‹¤ ë©”ì¸íì—ì„œ ë‹¤ë£¸

- GlobalQueue
    - ì“´ë‹¤ë©´ ëŒ€ë¶€ë¶„ ì´ íë¥¼ ì‚¬ìš©í•¨
    - Quality of Service(QoS)ì— ë”°ë¼ 6ê°œë¡œ êµ¬ë¶„
        
        ë¹ ë¥´ê²Œ ì²˜ë¦¬í•´ì•¼í•  ì¼ì€ UIì— ë³´ì—¬ì£¼ëŠ” ê²ƒ â†’ ìš°ì„ ìˆœìœ„ë¥¼ ë†’ì—¬ì¤˜ì•¼ í•¨
        
        ë°±ê·¸ë¼ìš´ë“œì—ì„œ ëŒì•„ê°€ëŠ” ê²ƒì€ (íŒŒì¼ ë‹¤ìš´ê³¼ ê°™ì€ ê²ƒ) â†’ ìš°ì„ ìˆœìœ„ë¥¼ ë‚®ê²Œ ì¤˜ë„ ë¨
        
    - Concurrent Queue

- CustomQueue

### **Quality of Service**(QoS) - ìš°ì„ ìˆœìœ„

![QoS](https://github.com/hyeji-K/Cloud_AI_MobileiOS_Course/blob/master/Daily_Study/image/Thread4.png)

```swift
DispatchQueue.global(qos: .background).async {<#code#>}
DispatchQueue.global().async {<#code#>} //.unspecified
DispatchQueue.global(qos: .background).async(qos:.utility) {<#code#>}
// ë’¤ìª½ì— ë¶™ì€ qosê°€ ìš°ì„ 
```

```swift
let session = URLSession.shared
let task = session.dataTask(with: request, completionHandler: dataTaskHandler)

task.resume()
```

- ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦¬ëŠ” ì‘ì—…ë“¤ì€ Main Threadì—ì„œ ì‘ì—…í•´ë„ ìë™ìœ¼ë¡œ global Queueë¡œ Dispatchë¨